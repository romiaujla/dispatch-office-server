BEGIN;

CREATE TABLE carriers(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username TEXT NOT NULL UNIQUE,
    password TEXT NOT NULL,
    company_name TEXT NOT NULL,
    full_name TEXT NOT NULL,
    mc_num TEXT NOT NULL UNIQUE
);

CREATE TABLE equipments(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    unit_num TEXT NOT NULL,
    carrier_id INTEGER REFERENCES carriers(id) ON DELETE CASCADE
);

CREATE TABLE drivers(
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    full_name TEXT NOT NULL,
    pay_rate NUMERIC(5,2) DEFAULT 0.00 NOT NULL,
    carrier_id INTEGER REFERENCES carriers(id) ON DELETE CASCADE,
    equipment_id INTEGER REFERENCES equipments(id) ON DELETE SET NULL
);

COMMIT;
